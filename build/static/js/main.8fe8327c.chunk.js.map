{"version":3,"sources":["components/contexts/CurrentUserContext.js","components/Portfolio/Portfolio.js","components/AboutMe/AboutMe.js","components/AboutProject/AboutProject.js","components/NavTab/NavTab.js","components/Promo/Promo.js","components/Techs/Techs.js","components/Navigation/Navigation.js","utils/Constants.js","components/Header/Header.js","components/Main/Main.js","components/FilterCheckbox/FilterCheckbox.js","components/ValidationError/ValidationError.js","components/SearchForm/SearchForm.js","components/MoviesCard/MoviesCard.js","components/MoviesCardList/MoviesCardList.js","components/Preloader/Preloader.js","utils/MoviesApi.js","components/Movies/Movies.js","components/SavedMovies/SavedMovies.js","components/ProtectedRoute/ProtectedRoute.js","components/Footer/Footer.js","components/Register/Register.js","components/Login/Login.js","components/Profile/Profile.js","components/NotFound/NotFound.js","utils/MainApi.js","components/App/App.js","index.js"],"names":["CurrentUserContext","createContext","currentUser","setCurrentUser","user","Portfolio","className","to","AboutMe","id","src","alt","AboutProject","NavTab","href","Promo","Techs","Navigation","pageType","mobile","loggedIn","menuMobile","useRef","menuViewHandle","current","classList","contains","remove","add","onClick","ref","showMoviesSettings","onStart","addMore","PAGE_TYPES","Header","LOGIN","REGISTER","React","useState","view","setView","isMobile","bodyWidth","document","body","getBoundingClientRect","width","useEffect","window","addEventListener","Main","FilterCheckbox","type","setFlag","event","flag","target","checked","ValidationError","errorText","SearchForm","setMovies","moviesForSrch","setIsLoading","valid","setValid","inputValue","setInputValue","setErrorText","shortFilmFlag","setShortFilmFlag","isFirstRender","ALL_MOVIES","clearError","tryToFilter","searchInputQuery","console","log","pureQuery","trim","reg","RegExp","searchResults","filter","x","nameRU","match","nameEN","description","duration","length","localStorage","setItem","JSON","stringify","savedInputValue","getItem","replace","name","onSubmit","e","preventDefault","noValidate","required","minLength","placeholder","onChange","value","onFocus","MoviesCard","movieName","movieLength","movieCover","movieInFavorite","addMovieToFav","movieId","removeMovieFromFav","SAVED_MOVIES","handleToggleFav","MoviesCardList","cards","favMovies","handleAddToFavorite","movie","handleRemoveFromFavorite","pType","_id","movieIdToRemove","map","image","url","Preloader","MoviesApi","this","fetch","then","res","ok","json","Promise","reject","status","Movies","isLoading","moviesForRender","setMoviesForRender","movies","moviesFromApi","setMoviesFromApi","moviesForRenderConfig","setMoviesForRenderConfig","screenWidth","setScreenWidth","showMoreButton","setShowMoreButton","setNewWidth","innerWidth","slice","handleScreenResize","setTimeout","removeEventListener","moviesApiList","getData","parse","getMoviesFromApi","savedFilteredMovies","SavedMovies","logout","getFavMovies","ProtectedRoute","redirectTo","hasPermission","children","Footer","Date","getFullYear","Register","handleRegister","handleLogin","errorFromApi","setErrorFromApi","history","useHistory","setName","email","setEmail","password","setPassword","allowSubmit","setAllowSubmit","handleInputError","input","message","getElementById","textContent","validateInputOnChange","validity","validationMessage","dataset","areAllInputsValid","Array","from","getElementsByTagName","every","checkFormValidity","nameInput","patternMismatch","setCustomValidity","tooShort","valueMissing","emailInput","typeMismatch","passwordInput","setInputListeners","push","userName","userEmail","userPassword","data","Error","catch","err","maxLength","pattern","autoFocus","autoComplete","disabled","Login","style","background","Profile","handleUpdateUserData","useContext","isError","inputError","toggle","NotFound","mainApi","baseUrl","_baseUrl","_headers","Accept","_headersAuth","_token","token","method","headers","credentials","response","country","director","year","thumbnail","formats","trailer","trailerLink","App","isLoggedIn","setIsLoggedIn","favMoviesCards","setFavMoviesCards","path","useLocation","pathname","firstRender","removeMovieFromFavorite","movieID","MainApi","removeFromFav","tokenChecker","setToken","getUserData","login","handleLogout","clear","Provider","exact","createUser","addToFav","editUserData","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.8fe8327c.chunk.js","sourcesContent":["import {createContext} from 'react';\n\nconst CurrentUserContext = createContext({\n    currentUser: null,\n    // eslint-disable-next-line no-unused-vars\n    setCurrentUser: (user) => {},\n});\n\nexport default CurrentUserContext;\n","import React from \"react\";\r\nimport \"./Portfolio.css\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\nfunction Portfolio() {\r\n    return (\r\n      <div className=\"Portfolio\">\r\n          <h4 className=\"Portfolio__title\">Портфолио</h4>\r\n          <ul className=\"Portfolio__list\">\r\n              <li className=\"Portfolio__item\">\r\n                  <Link className=\"Portfolio__link\" to=\"#\">Статичный сайт</Link></li>\r\n              <li className=\"Portfolio__item\">\r\n                  <Link className=\"Portfolio__link\" to=\"#\">Адаптивный сайт</Link></li>\r\n              <li className=\"Portfolio__item\">\r\n                  <Link className=\"Portfolio__link\" to=\"#\">Одностраничное приложение</Link></li>\r\n          </ul>\r\n      </div>\r\n    );\r\n}\r\n\r\nexport default Portfolio;\r\n","import React from \"react\";\r\nimport \"./AboutMe.css\";\r\nimport Portfolio from \"../Portfolio/Portfolio\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\nfunction AboutMe() {\r\n  return (\r\n    <section id=\"AboutMe\" className=\"AboutMe\">\r\n      <h3 className=\"AboutMe__title\">Студент</h3>\r\n      <div className=\"AboutMe__text-wrapper\">\r\n        <p className=\"AboutMe__name\">Олег</p>\r\n        <p className=\"AboutMe__profession\">Фронтенд-разработчик, 27 лет</p>\r\n        <p className=\"AboutMe__bio\">\r\n          Я родился в 94 ом на краю города\r\n          Фронтенд поздно ударил в голову в 25 активно верстал неправильно\r\n          В Практикуме девочки впервые показали мне ООП .\r\n        </p>\r\n          <img src=\"https://sun9-23.userapi.com/impg/wSiudxrs3U0RZGY0Yha-ztwmQiKZXUjpTdBOtA/L0eA0KILgNc.jpg?size=848x1280&quality=95&sign=ae2d8d8af705969c777ffabfacd304b0&type=album\" alt=\"Фото красавца\" className=\"AboutMe__photo\"/>\r\n          <ul className=\"AboutMe__contacts-list\">\r\n              <li className=\"AboutMe__contacts-item\"><Link className=\"AboutMe__link_contact\" to='https://www.facebook.com/o.mildz'>Facebook</Link></li>\r\n              <li className=\"AboutMe__contacts-item\"><Link className=\"AboutMe__link_contact\" to='https://github.com/SidWonder'>Github</Link></li>\r\n          </ul>\r\n      </div>\r\n\r\n        <Portfolio />\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default AboutMe;\r\n","import React from \"react\";\r\nimport './AboutProject.css';\r\n\r\nfunction AboutProject() {\r\n    return (\r\n        <section id=\"AboutProject\" className=\"AboutProject\">\r\n            <h3 className=\"AboutProject__title\">О проекте</h3>\r\n            <div className=\"AboutProject__stages-wrapper\">\r\n                <div className=\"AboutProject__stage\">\r\n                    <p className=\"AboutProject__stageText\">Дипломный проект включал 5 этапов</p>\r\n                    <p className=\"AboutProject__stageSubtext\">Составление плана, работу над бэкендом, вёрстку, добавление функциональности и финальные доработки.</p>\r\n                </div>\r\n                <div className=\"AboutProject__stage\">\r\n                    <p className=\"AboutProject__stageText\">На выполнение диплома ушло 5 недель</p>\r\n                    <p className=\"AboutProject__stageSubtext\">У каждого этапа был мягкий и жёсткий дедлайн, которые нужно было соблюдать, чтобы успешно защититься.</p>\r\n                </div>\r\n            </div>\r\n                <div className=\"AboutProject__progressBar\">\r\n                    <span className=\"AboutProject__progressBarItem AboutProject__progressBarItem_backend\"><p className=\"AboutProject__progressBarText\">1 неделя</p></span>\r\n                    <span className=\"AboutProject__progressBarItem AboutProject__progressBarItem_frontend\"><p className=\"AboutProject__progressBarText\">4 недели</p></span>\r\n                </div>\r\n        </section>\r\n    );\r\n}\r\n\r\nexport default AboutProject;\r\n","import React from \"react\";\r\nimport './NavTab.css';\r\n\r\nfunction NavTab() {\r\n    return (\r\n        <nav className=\"NavTab\">\r\n            <ul className=\"NavTab__list\">\r\n                <li className=\"NavTab__listItem\"><a href=\"#AboutProject\" className=\"NavTab__link\">О проекте</a></li>\r\n                <li className=\"NavTab__listItem\"><a href=\"#Techs\" className=\"NavTab__link\">Технологии</a></li>\r\n                <li className=\"NavTab__listItem\"><a href=\"#AboutMe\" className=\"NavTab__link\">Студент</a></li>\r\n            </ul>\r\n        </nav>\r\n    );\r\n}\r\n\r\nexport default NavTab;","import React from \"react\";\r\nimport './Promo.css';\r\n\r\nfunction Promo() {\r\n    return(\r\n        <section className=\"Promo\">\r\n            <p className=\"Promo__mainText\">\r\n                Учебный проект студента факультета Веб-разработки.\r\n            </p>\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default Promo;","import React from \"react\";\r\nimport \"./Techs.css\";\r\n\r\nfunction Techs() {\r\n    return (\r\n        <section id=\"Techs\" className=\"Techs\">\r\n            <h3 className=\"Techs__header\">Технологии</h3>\r\n            <p className=\"Techs__title\">7 технологии</p>\r\n            <p className=\"Techs__subtitle\">На курсе веб-разработки мы освоили технологии, которые применили в дипломном проекте.</p>\r\n            <ul className=\"Techs__list\">\r\n                <li className=\"Techs__listItem\">HTML</li>\r\n                <li className=\"Techs__listItem\">CSS</li>\r\n                <li className=\"Techs__listItem\">JS</li>\r\n                <li className=\"Techs__listItem\">React</li>\r\n                <li className=\"Techs__listItem\">Git</li>\r\n                <li className=\"Techs__listItem\">Express.js</li>\r\n                <li className=\"Techs__listItem\">mongoDB</li>\r\n            </ul>\r\n\r\n\r\n        </section>\r\n    );\r\n}\r\n\r\nexport default Techs;","import {React, useRef} from \"react\";\nimport './Navigation.css';\nimport {Link} from \"react-router-dom\";\n\nfunction Navigation({pageType, mobile, loggedIn}) {\n    const menuMobile = useRef(null);\n\n    const menuViewHandle = () => {\n        const menuViewSelector = 'Navigation__list_mobile-active';\n        if (menuMobile.current.classList.contains(menuViewSelector)) {\n            menuMobile.current.classList.remove('Navigation__list_mobile-active');\n        } else {\n            menuMobile.current.classList.add('Navigation__list_mobile-active');\n        }\n    }\n\n    return (\n        <nav className={`Navigation ${mobile ? 'Navigation__mobile' : 'Navigation__desktop'}`}>\n            {pageType === 'main' &&\n                <ul className=\"Navigation__list Navigation__list_main\">\n                    <li className=\"Navigation__listItem_main\n                                   Navigation__listItem_registration\">\n                        {loggedIn ?\n                                <Link to=\"/movies\" className=\"Navigation__link Navigation__link_auth\">Фильмы</Link>\n                            :   <Link to=\"/signup\" className=\"Navigation__link Navigation__link_auth\">Регистрация</Link>}\n                    </li>\n                    <li className=\"Navigation__listItem_main\n                                Navigation__listItem_login\">\n                        {loggedIn ?\n                            <Link to=\"/saved-movies\" className=\"Navigation__link Navigation__link_auth\">Сохраненные фильмы</Link> :\n                            <Link to=\"/signin\" className=\"Navigation__link Navigation__link_auth Navigation__link_auth_active\">Войти</Link>\n                        }\n                    </li>\n            </ul>}\n\n            {(pageType === 'allMovies'\n                || pageType === 'savedMovies'\n                || pageType === 'profile') && mobile && <>\n                <button onClick={menuViewHandle} className=\"Navigation__button_menuToggle\"></button>\n                <ul ref={menuMobile} className={`Navigation__list Navigation__list_default Navigation__list_mobile`}>\n                    <button onClick={menuViewHandle} className=\"Navigation__button_close\"></button>\n                    <li className=\"Navigation__listItem_default\n                            Navigation__listItem_default-mobile\">\n                        <Link to=\"/\" className=\"Navigation__link\n         Navigation__link_movies\">Главная</Link>\n                    </li>\n                    <li className=\"Navigation__listItem_default\n                            Navigation__listItem_default-mobile\">\n                        <Link to=\"/movies\" className=\"Navigation__link\n         Navigation__link_movies\">Фильмы</Link>\n                    </li>\n                    <li className=\"Navigation__listItem_default Navigation__listItem_default-mobile\">\n                        <Link to=\"/saved-movies\" className=\"Navigation__link\n          Navigation__link_savedMovies\">Сохраненные фильмы</Link>\n                    </li>\n                    <li className=\"Navigation__listItem_default Navigation__listItem_default-mobile\">\n                        <Link to=\"/profile\" className=\"Navigation__link\n          Navigation__link_account\">Аккаунт</Link>\n                    </li>\n                </ul>\n            </>\n            }\n\n            {(pageType === 'allMovies'\n                || pageType === 'savedMovies'\n                || pageType === 'profile') && !mobile && <>\n                <ul ref={menuMobile}\n                    className={`Navigation__list\n                                Navigation__list_default\n                                Navigation__list_desktop`}\n                >\n                    <li className=\"Navigation__listItem_default\n                                        Navigation__listItem_default-desktop\"\n                    >\n                        <Link to=\"/movies\" className=\"Navigation__link\n                                                        Navigation__link_movies\">Фильмы\n                        </Link>\n                    </li>\n                        <li className=\"Navigation__listItem_default\n                                            Navigation__listItem_default-desktop\">\n                            <Link to=\"/saved-movies\" className=\"Navigation__link\n                  Navigation__link_savedMovies\">Сохраненные фильмы</Link>\n                        </li>\n                        <li className=\"Navigation__listItem_default\n                                            Navigation__listItem_default-desktop\">\n                            <Link to=\"/profile\" className=\"Navigation__link\n                  Navigation__link_account\">Аккаунт\n                            </Link>\n                        </li>\n                </ul>\n            </>\n            }\n        </nav>\n\n\n    );\n//\n}\n\nexport default Navigation;\n","export const showMoviesSettings = {\r\n    large: {\r\n        onStart: 12,\r\n        addMore: 3,\r\n    },\r\n    medium: {\r\n        onStart: 8,\r\n        addMore: 2,\r\n    },\r\n    small: {\r\n        onStart: 5,\r\n        addMore: 2,\r\n    },\r\n};\r\n\r\nexport const PAGE_TYPES = {\r\n    ALL_MOVIES: 'allMovies',\r\n    SAVED_MOVIES: 'savedMovies',\r\n    LOGIN: 'login',\r\n    REGISTER: 'register',\r\n\r\n\r\n};","import React from \"react\";\r\nimport \"./Header.css\";\r\nimport Navigation from \"../Navigation/Navigation\";\r\nimport {Link} from \"react-router-dom\";\r\nimport {PAGE_TYPES} from \"../../utils/Constants\";\r\n\r\nfunction Header({pageType, loggedIn}) {\r\n    const {LOGIN, REGISTER} = PAGE_TYPES;\r\n    const [view,setView] = React.useState(null);\r\n\r\n    function isMobile () {\r\n        const bodyWidth = document.body.getBoundingClientRect().width;\r\n        setView(bodyWidth >=320 && bodyWidth <=1023 ? true : false);\r\n    }\r\n\r\n\r\n    React.useEffect(()=>{\r\n        isMobile();\r\n        window.addEventListener('resize', isMobile)\r\n    }, []);\r\n\r\n    return (\r\n        <header className={`Header Header__${pageType}`} >\r\n            <Link to=\"/\"\r\n                  className=\"Header__link_logo\">\r\n            </Link>\r\n            {pageType === REGISTER && <h2 className='Header__title'>Добро пожаловать!</h2>}\r\n            {pageType === LOGIN && <h2 className='Header__title'>Рады видеть!</h2>}\r\n            <Navigation pageType={pageType} mobile={view} loggedIn={loggedIn}/>\r\n        </header>\r\n    )\r\n}\r\n\r\nexport default Header;\r\n","import React from 'react';\r\nimport AboutMe from '../AboutMe/AboutMe';\r\nimport AboutProject from \"../AboutProject/AboutProject\";\r\nimport NavTab from \"../NavTab/NavTab\";\r\nimport Promo from \"../Promo/Promo\";\r\nimport Techs from \"../Techs/Techs\";\r\nimport Header from \"../Header/Header\";\r\n\r\nfunction Main({loggedIn}) {\r\n    return (\r\n        <section className='Main'>\r\n            <Header pageType={'main'} loggedIn={loggedIn}/>\r\n            <Promo />\r\n            <NavTab />\r\n            <AboutProject />\r\n            <Techs />\r\n            <AboutMe />\r\n    </section>)\r\n}\r\n\r\nexport default Main;\r\n","import React from \"react\";\r\nimport \"./FilterCheckbox.css\";\r\n\r\nfunction FilterCheckbox({type, setFlag}){\r\n\r\n    function handleShowFlagToggle(event){\r\n        const flag = event.target.checked;\r\n        setFlag(flag);\r\n    }\r\n\r\n    return (\r\n       <div className=\"FilterCheckbox\">\r\n           <p className=\"FilterCheckbox__type\">{type}</p>\r\n           <label className=\"FilterCheckbox__switch\">\r\n               <input onClick={handleShowFlagToggle} type=\"checkbox\"\r\n                      className=\"FilterCheckbox__input\"/>\r\n               <span className=\"FilterCheckbox__slider\"></span>\r\n           </label>\r\n\r\n       </div>)\r\n}\r\n\r\nexport default FilterCheckbox;","import React from \"react\";\nimport './ValidationError.css'\n\nfunction ValidationError({errorText}){\n    return(\n        <p className=\"ValidationError\">{errorText}</p>\n    );\n}\n\nexport default ValidationError;\n","import { React, useEffect, useRef, useState} from \"react\";\nimport \"./SearchForm.css\";\n\nimport FilterCheckbox from \"../FilterCheckbox/FilterCheckbox\";\nimport ValidationError from \"../ValidationError/ValidationError\";\nimport { PAGE_TYPES } from \"../../utils/Constants\";\n\nfunction SearchForm({setMovies, moviesForSrch, setIsLoading, pageType}) {\n\n    const [valid, setValid] = useState(true);\n    const [inputValue, setInputValue] = useState('');\n    const [errorText, setErrorText] = useState(null);\n    const [shortFilmFlag, setShortFilmFlag] = useState(false);\n    const isFirstRender = useRef(true);\n\nconst {ALL_MOVIES} = PAGE_TYPES\n\n    useEffect(() => {\n        if (isFirstRender.current) {\n            const savedInputValue = localStorage.getItem(\"searchQueryYa\") || [];\n            if (savedInputValue.length > 0) setInputValue(savedInputValue.replace(/['\"]/gi, '').trim());\n            isFirstRender.current = false;\n        }\n    }, []);\n\n    useEffect(() => {\n    }, [errorText]);\n\n    function handleChange(e) {\n        clearError();\n        setInputValue(e.target.value);\n    }\n\n    function handleSearch(e) {\n        clearError();\n        e.preventDefault();\n\n        if (!inputValue) {\n            setErrorText('Нужно ввести ключевое слово');\n            setValid(false);\n        } else if (inputValue.length < 3) {\n            setErrorText('Введите не менее трёх букв');\n            setValid(false);\n        } else {\n           return tryToFilter(inputValue);\n        }\n    }\n\n    function clearError() {\n        setErrorText(null);\n        setValid(true);\n    }\n\n    function tryToFilter(searchInputQuery, flag = false) {\n      console.log(shortFilmFlag)\n        const pureQuery = searchInputQuery.trim()\n        const reg = new RegExp(pureQuery, \"gi\");\n\n        let searchResults = moviesForSrch.filter(x => {\n            return x.nameRU.match(reg)\n                || (x.nameEN && x.nameEN.match(reg))\n                || (x.description && x.description.match(reg))\n        });\n\n        if(flag) {\n          searchResults = searchResults.filter(x => x.duration <= 40)\n        }\n\n        if (searchResults.length) {\n          if(pageType === ALL_MOVIES) {\n            localStorage.setItem(\"searchResults\", JSON.stringify(searchResults));\n            localStorage.setItem(\"searchQueryYa\", JSON.stringify(inputValue));\n            setIsLoading(false);\n          }\n            setMovies(searchResults);\n        } else {\n          if(pageType === ALL_MOVIES) {\n            setIsLoading(false);\n          }\n          setMovies('nullSearch');\n        }\n    }\n\n    function handleToggleShortFilmFlag(flag){\n        setShortFilmFlag(flag);\n        tryToFilter(inputValue, flag)\n    }\n\n    return (\n        <form\n            name='searchForm'\n            className={`SearchForm`}\n            onSubmit={handleSearch}\n            noValidate\n        >\n            <label\n                className=\"SearchForm__label\"\n            >\n                <input required\n                       minLength={3}\n                       type=\"text\"\n                       name=\"searchInput\"\n                       placeholder=\"Фильм\"\n                       className={`SearchForm__input ${!valid ? 'SearchForm__input__error' : ''}`}\n                       onChange={handleChange}\n                       onFocus={clearError}\n                       value={inputValue || ''}\n                ></input>\n                {!valid && <ValidationError errorText={errorText}/>}\n                <button\n                    className=\"SearchForm__button\">Найти\n                </button>\n            </label>\n            <FilterCheckbox\n                type=\"Короткометражки\"\n                setFlag={handleToggleShortFilmFlag}\n            />\n        </form>);\n}\n\nexport default SearchForm;\n","import React from \"react\";\r\nimport \"./MoviesCard.css\";\r\n\r\nimport {PAGE_TYPES} from \"../../utils/Constants\";\r\n\r\nfunction MoviesCard({movieName , movieLength, movieCover, movieInFavorite, pageType, addMovieToFav, movieId, removeMovieFromFav}) {\r\n\r\n    const {ALL_MOVIES, SAVED_MOVIES} = PAGE_TYPES;\r\n\r\n    function handleToggleFav(){\r\n\r\n        if(movieInFavorite){\r\n            console.log('try to remove', pageType);\r\n            return removeMovieFromFav(movieId, pageType);\r\n        } else {\r\n            addMovieToFav(movieId);\r\n        }\r\n\r\n    }\r\n\r\n    return (\r\n        <div className=\"MoviesCard\">\r\n            <p className=\"MoviesCard__title\">{movieName}</p>\r\n            <p className=\"MoviesCard__length\">{movieLength} минут</p>\r\n            <img src={movieCover} alt={`Облошка фильма ${movieName}`} className=\"MoviesCard__image\"/>\r\n            {pageType === ALL_MOVIES && <button onClick={handleToggleFav} className={`MoviesCard__button ${movieInFavorite && 'MoviesCard__button_inFavoriteMovieList'}`}>{!movieInFavorite && 'Сохранить'}</button>}\r\n            {pageType === SAVED_MOVIES && <button onClick={handleToggleFav} className='MoviesCard__button MoviesCard__button_inFavoriteList'></button>}\r\n        </div>)\r\n}\r\n\r\nexport default MoviesCard;","import React from \"react\";\nimport \"./MoviesCardList.css\";\nimport {PAGE_TYPES} from \"../../utils/Constants\";\nimport MoviesCard from \"../MoviesCard/MoviesCard\";\n\nconst {ALL_MOVIES, SAVED_MOVIES} = PAGE_TYPES;\n\nfunction MoviesCardList({cards, pageType, addMovieToFav,favMovies ,removeMovieFromFav}) {\n    function isFavorite(id){\n        const isFavorite = favMovies.filter(x=> x.movieId === id)\n        if(isFavorite.length) {\n            return true;\n        } else {\n           return false;\n        }\n    }\n\n    function handleAddToFavorite(movie){\n        addMovieToFav(movie);\n    }\n\n    function handleRemoveFromFavorite(movie, pType){\n        console.log(movie, pType)\n        if(pType === SAVED_MOVIES){\n           return removeMovieFromFav(movie._id);\n        } else if (pType === ALL_MOVIES) {\n            const movieIdToRemove = favMovies.filter(x=> x.movieId === movie.id)[0]._id;\n            return removeMovieFromFav(movieIdToRemove);\n        }\n\n    }\n\n    return (\n        <section className=\"MoviesCardList\">\n            {console.log(cards, \"MoviesCardList\")}\n        { pageType === ALL_MOVIES &&\n                cards?.map((x) => {\n                        return (\n                    <MoviesCard movieName={x.nameRU}\n                                movieLength={x.duration}\n                                movieCover={`https://api.nomoreparties.co${x.image.url}`}\n                                movieInFavorite={isFavorite(x.id)}\n                                addMovieToFav={()=>handleAddToFavorite(x)}\n                                removeMovieFromFav={()=>handleRemoveFromFavorite(x, ALL_MOVIES)}\n                                pageType={ALL_MOVIES}\n                                movieId={x.id}\n                                key={x.id}\n                                />\n                )})\n        }\n        {pageType === SAVED_MOVIES && cards?.map((x) => {\n                return (\n                    <MoviesCard movieName={x.nameRU}\n                                movieLength={x.duration}\n                                movieCover={x.image}\n                                movieInFavorite={true}\n                                removeMovieFromFav={()=>handleRemoveFromFavorite(x, SAVED_MOVIES)}\n                                pageType={SAVED_MOVIES}\n                                key={x._id}\n                    />\n                )})}\n\n        </section>\n    )\n}\n\nexport default MoviesCardList;\n","import React from 'react'\r\nimport './Preloader.css'\r\n\r\nconst Preloader = () => {\r\n    return (\r\n        <div className=\"preloader\">\r\n            <div className=\"preloader__container\">\r\n                <span className=\"preloader__round\"></span>\r\n            </div>\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default Preloader\r\n","const baseUrl = 'https://api.nomoreparties.co/beatfilm-movies';\r\n\r\nclass Api {\r\n    constructor(url) {\r\n        this.url = url;\r\n    }\r\n\r\n    getData() {\r\n        return fetch(this.url)\r\n            .then((res) => {\r\n                if (!res.ok) {\r\n                    return Promise.reject(`Error: ${res.status}`);\r\n                }\r\n                return res.json();\r\n            });\r\n    }\r\n}\r\nconst MoviesApi = new Api(baseUrl);\r\nexport default MoviesApi;","import React, { useEffect, useState } from \"react\";\nimport \"./Movies.css\";\n\nimport SearchForm from \"../SearchForm/SearchForm\";\nimport MoviesCardList from \"../MoviesCardList/MoviesCardList\";\nimport Header from \"../Header/Header\";\nimport Preloader from \"../Preloader/Preloader\";\nimport MoviesApi from \"utils/MoviesApi\";\nimport { PAGE_TYPES, showMoviesSettings } from \"../../utils/Constants\";\n\nfunction Movies({ addMovieToFav, removeMovieFromFav, favMovies, loggedIn }) {\n  const [isLoading, setIsLoading] = useState(false);\n\n  const [moviesForRender, setMoviesForRender] = useState([]);\n  const [movies, setMovies] = useState([]);\n  const [moviesFromApi, setMoviesFromApi] = useState([]);\n\n  const [moviesForRenderConfig, setMoviesForRenderConfig] = useState(\n    showMoviesSettings.large\n  );\n  const [screenWidth, setScreenWidth] = useState(0);\n  const [showMoreButton, setShowMoreButton] = useState(false);\n\n  const { ALL_MOVIES } = PAGE_TYPES;\n\n  useEffect(() => {\n    setScreenWidth(window.innerWidth);\n    if (screenWidth <= 760) {\n      setMoviesForRenderConfig(showMoviesSettings.small);\n    }\n    if (screenWidth > 760 && screenWidth <= 900) {\n      setMoviesForRenderConfig(showMoviesSettings.medium);\n    }\n    if (screenWidth > 900) {\n      setMoviesForRenderConfig(showMoviesSettings.large);\n    }\n  }, [screenWidth]);\n\n  useEffect(() => {\n    setMoviesForRender(movies?.slice(0, moviesForRenderConfig.onStart));\n    setShowMoreButton(true);\n  }, [movies, moviesForRenderConfig.onStart]);\n\n\n  useEffect(() => {\n    function handleScreenResize() {\n      setTimeout(setNewWidth, 600);\n    }\n\n    window.addEventListener(\"resize\", handleScreenResize);\n\n    return () => {\n      window.removeEventListener(\"resize\", handleScreenResize);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (moviesForRender?.length === movies?.length) {\n      setShowMoreButton(false);\n    }\n  }, [movies, moviesForRender]);\n\n  useEffect(() => {\n    getMoviesFromApi()\n    const savedFilteredMovies = JSON.parse(localStorage.getItem('searchResults'));\n    if (savedFilteredMovies) {\n        setMovies(savedFilteredMovies);\n    }\n}, [])\n\n  function setNewWidth() {\n    setScreenWidth(window.innerWidth);\n  }\n\n  function handleShowMore() {\n    setMoviesForRender([\n      ...moviesForRender,\n      ...movies.slice(\n        moviesForRender.length,\n        moviesForRender.length + moviesForRenderConfig.addMore\n      ),\n    ]);\n  }\n\n  function getMoviesFromApi() {\n    setIsLoading(true);\n    const moviesApiList =  localStorage.getItem(\"beatFilmDB\")\n    if (!moviesApiList) {\n      return MoviesApi.getData()\n        .then((res) => {\n          setMoviesFromApi(res);\n          localStorage.setItem(\"beatFilmDB\", JSON.stringify(res));\n        })\n        .then(() => setIsLoading(false));\n    } else {\n      setMoviesFromApi(JSON.parse(moviesApiList));\n    }\n    setIsLoading(false);\n  }\n\n  return (\n    <section className=\"Movies\">\n      <Header loggedIn={loggedIn} pageType={ALL_MOVIES} />\n      <SearchForm\n        pageType={ALL_MOVIES}\n        setMovies={setMovies}\n        moviesForSrch={moviesFromApi}\n        setIsLoading={setIsLoading}\n      />\n      {moviesForRender.length &&\n// @ts-ignore\n      moviesForRender !== \"nullSearch\" && (\n        <MoviesCardList\n          cards={moviesForRender}\n          favMovies={favMovies}\n          pageType={ALL_MOVIES}\n          addMovieToFav={addMovieToFav}\n          removeMovieFromFav={removeMovieFromFav}\n        />\n      )}\n      {\n// @ts-ignore\n      moviesForRender === \"nullSearch\" && (\n        <p className=\"Movies__null-search\">Ничего не найдено</p>\n      )}\n      {isLoading && <Preloader />}\n      {moviesForRender?.length > 0 && showMoreButton && (\n        <button\n          className=\"Movies__show-more-button\"\n          type=\"button\"\n          onClick={handleShowMore}\n        >\n          Ещё\n        </button>\n      )}\n    </section>\n  );\n}\n\nexport default Movies;\n","import React, {useEffect, useState} from \"react\";\nimport \"./SavedMovies.css\";\nimport MoviesCardList from \"../MoviesCardList/MoviesCardList\";\nimport Header from \"../Header/Header\";\nimport SearchForm from \"../SearchForm/SearchForm\";\nimport {PAGE_TYPES} from \"../../utils/Constants\";\n\nfunction SavedMovies({logout, removeMovieFromFav ,loggedIn, movies, getFavMovies}) {\n\n    const {SAVED_MOVIES} = PAGE_TYPES;\n\n    const [moviesForRender, setMoviesForRender] = useState( []);\n\n    useEffect(() => {\n        setMoviesForRender(movies)\n    }, [movies]);\n\n    return (\n        <section className=\"SavedMovies\">\n            <Header\n                pageType={'savedMovies'}\n                loggedIn={loggedIn}\n                logout={logout}/>\n            <SearchForm\n                pageType={SAVED_MOVIES}\n                setMovies={setMoviesForRender}\n                moviesForSrch={movies}\n            />\n               {moviesForRender === \"nullSearch\" && (\n        <p className=\"Movies__null-search\">Ничего не найдено</p>\n      )}\n            { moviesForRender.length && moviesForRender !== \"nullSearch\" &&  <MoviesCardList cards={moviesForRender}\n                            favMovies={moviesForRender}\n                            removeMovieFromFav={removeMovieFromFav}\n                            pageType={SAVED_MOVIES}\n                            getFavMovies={getFavMovies}/>}\n        </section>\n    )\n}\n\nexport default SavedMovies\n","import { React, Route, Redirect } from 'react-router-dom';\n\nfunction ProtectedRoute({ redirectTo, hasPermission, children }) {\n    return (\n        <Route>\n            {() => (hasPermission ? children : <Redirect to={redirectTo} />)}\n        </Route>\n    );\n}\n\nexport default ProtectedRoute;\n","import React from \"react\";\r\nimport \"./Footer.css\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\nfunction Footer () {\r\n    return (\r\n        <footer className=\"Footer\">\r\n                <p className=\"Footer__text\">Учебный проект Яндекс.Практикум х BeatFilm.</p>\r\n                <ul className=\"Footer__list\">\r\n                    <li className=\"Footer__item\">&copy; {new Date().getFullYear()}</li>\r\n                    <li className=\"Footer__item\"><Link to='https://practicum.yandex.ru/' className=\"Footer__link\">Яндекс.Практикум</Link></li>\r\n                    <li className=\"Footer__item\"><Link to='https://github.com/SidWonder' className=\"Footer__link\">Github</Link></li>\r\n                    <li className=\"Footer__item\"><Link to='https://www.facebook.com/o.mildz' className=\"Footer__link\">Facebook</Link></li>\r\n                </ul>\r\n        </footer>\r\n    );\r\n}\r\n\r\nexport default Footer;\r\n","import React, {useState, useEffect} from \"react\";\nimport './Register.css';\nimport {Link, useHistory} from \"react-router-dom\";\n\nimport Header from \"../Header/Header\";\n\nfunction Register({handleRegister, handleLogin, loggedIn}) {\n\n    // const [error, setError] = useState(false);\n    const [errorFromApi, setErrorFromApi] = useState(false);\n\n    const history = useHistory();\n\n    const [name, setName] = React.useState('');\n    const [email, setEmail] = React.useState('');\n    const [password, setPassword] = React.useState('');\n\n    const [allowSubmit, setAllowSubmit] = useState(false);\n\n    const handleInputError = (input, message) => {\n        const inputError = document.getElementById(`${input.id}Error`);\n        inputError.textContent = message;\n    };\n\n    const checkFormValidity = () => {\n        const inputs = Array.from(document.getElementsByTagName('input'));\n        const areAllInputsValid = inputs.every((input) => input.validity.valid);\n        setAllowSubmit(areAllInputsValid);\n    };\n\n    const validateInputOnChange = (e) => {\n        const input = e.target;\n        setErrorFromApi(false);\n        if (input.validity.valid) {\n            input.classList.remove('Register__error_input')\n            handleInputError(input, input.validationMessage, false);\n        } else {\n            input.dataset.valid = false;\n            input.classList.add('Register__error_input')\n            handleInputError(input, input.validationMessage, true);\n        }\n        checkFormValidity();\n    };\n\n    const setInputListeners = () => {\n        // Слушатели для кастомных текстов ошибок инпутов\n        const nameInput = document.getElementById('Register__name');\n        nameInput.addEventListener('input', () => {\n            if (nameInput.validity.patternMismatch) {\n                nameInput.setCustomValidity('Имя может содержать только буквы, пробел и тире.');\n            } else if (nameInput.validity.tooShort) {\n                nameInput.setCustomValidity('Имя слишком короткое.');\n            } else if (nameInput.validity.valueMissing) {\n                nameInput.setCustomValidity('Введите ваше имя на латинице или кириллице.');\n            } else {\n                nameInput.setCustomValidity('');\n            }\n        });\n\n        const emailInput = document.getElementById('Register__email');\n        emailInput.addEventListener('input', () => {\n            if (emailInput.validity.typeMismatch || emailInput.validity.patternMismatch) {\n                emailInput.setCustomValidity('Это не похоже на настоящий email.');\n            } else {\n                emailInput.setCustomValidity('');\n            }\n        });\n\n        const passwordInput = document.getElementById('Register__password');\n        passwordInput.addEventListener('input', () => {\n            if (passwordInput.validity.tooShort) {\n                passwordInput.setCustomValidity(`Слишком короткий пароль, минимум 8 символов (Сейчас ${passwordInput.value.length}).`);\n            } else {\n                passwordInput.setCustomValidity('');\n            }\n        });\n    };\n\n    useEffect(() => {\n        setInputListeners();\n    }, []);\n\n    useEffect(() => {\n        loggedIn && history.push('/movies');\n    }, [loggedIn]);\n\n\n    function submitRegister(event) {\n    event.preventDefault();\n\n\n    const userName = event.target.name.value;\n    const userEmail = event.target.email.value;\n    const userPassword = event.target.password.value;\n\n    handleRegister(userName, userEmail, userPassword)\n    .then((data) => {\n        if (data.ok) {\n            return data.json();\n        } else if (data.status === 409) {\n            setErrorFromApi('Такой пользователь уже существует');\n            throw new Error('Такой пользователь уже существует');\n        }})\n        .then((res) => {\n            if(res && res.status !== 400 && res.status !== 409) {\n                handleLogin(userEmail, userPassword)\n            } else {\n               return new Error();\n            }\n        })\n        .then(()=> setAllowSubmit(false))\n        .catch((err)=> console.log(err))\n    }\n\n\n    return (\n        <section className=\"Register\">\n            <Header pageType={'register'}/>\n            { errorFromApi && <div className=\"Register__error_api\">{errorFromApi}</div>}\n            <form\n                noValidate={true}\n                onSubmit={submitRegister}\n                className=\"Register__form\">\n                <label className=\"Register__label\">\n                    Имя\n                    <input\n                        // onChange={handleError}\n                        placeholder=\"Username\"\n                        type=\"text\"\n                        className=\"Register__input\"\n                        name=\"name\"\n                        id=\"Register__name\"\n                        onChange={(e) => {\n                            setName(e.target.value);\n                            validateInputOnChange(e);\n                        }}\n                        value={name}\n                        maxLength=\"25\"\n                        minLength=\"2\"\n                        pattern=\"^[А-Яа-яa-zA-Z]+(([' -][А-Яа-яa-zA-Z ])?[А-Яа-яa-zA-Z]*)*$\"\n                        required\n                        autoFocus=\"true\"\n                    />\n                    <span className=\"Register__error_text\" id=\"Register__nameError\"></span>\n                </label>\n                <label className=\"Register__label\">\n                    E-mail\n                    <input\n                        placeholder=\"name@domain.com\"\n                        name=\"email\"\n                        type=\"email\"\n                        className=\"Register__input\"\n                        id=\"Register__email\"\n                        pattern=\"^\\S+@\\S+\\.\\S+$\"\n                        minLength=\"2\"\n                        onChange={(e) => {\n                            setEmail(e.target.value);\n                            validateInputOnChange(e);\n                        }}\n                        value={email}\n                        required\n                        autoComplete=\"nope\"\n                    />\n                    <span className=\"Register__error_text\" id=\"Register__emailError\"></span>\n                </label>\n                <label className=\"Register__label\">\n                    Пароль\n                    <input\n                        minLength={8}\n                        placeholder=\"Не менее 8 знаков\"\n                        type=\"password\"\n                        name=\"password\"\n                        className=\"Register__input\"\n                        id=\"Register__password\"\n                        autoComplete=\"on\"\n                        onChange={(e) => {\n                            setPassword(e.target.value);\n                            validateInputOnChange(e);\n                        }}\n                        value={password}\n                        required\n                    />\n                    <span className=\"Register__error_text\" id=\"Register__passwordError\"></span>\n                </label>\n                <button disabled={!allowSubmit} type=\"submit\" className=\"Register__button\">Зарегистрироваться</button>\n                <p className=\"Register__text\">Уже зарегистрированы? <Link to=\"/signin\" className=\"Register__link\">Войти</Link></p>\n            </form>\n\n        </section>\n    );\n}\n\nexport default Register;\n","import {React, useState, useEffect} from \"react\";\nimport './Login.css';\nimport Header from \"../Header/Header\";\nimport {Link, useHistory} from \"react-router-dom\";\n\nfunction Login({handleLogin, loggedIn}) {\n\n    const history = useHistory();\n\n    const [email, setEmail] = useState('');\n    const [password, setPassword] = useState('');\n    const [allowSubmit, setAllowSubmit] = useState(false);\n\n    const handleInputError = (input, message) => {\n        const inputError = document.getElementById(`${input.id}Error`);\n        inputError.textContent = message;\n    };\n\n    const checkFormValidity = () => {\n        const inputs = Array.from(document.getElementsByTagName('input'));\n        const areAllInputsValid = inputs.every((input) => input.validity.valid);\n        console.log(areAllInputsValid);\n        setAllowSubmit(areAllInputsValid);\n    };\n\n    const validateInputOnChange = (e) => {\n        const input = e.target;\n\n        if (input.validity.valid) {\n            handleInputError(input, input.validationMessage, false);\n        } else {\n            input.dataset.valid = false;\n            handleInputError(input, input.validationMessage, true);\n        }\n        checkFormValidity();\n    };\n\n    const setInputListeners = () => {\n        const emailInput = document.getElementById('Login__email');\n        emailInput.addEventListener('input', () => {\n            if (emailInput.validity.typeMismatch || emailInput.validity.patternMismatch) {\n                emailInput.setCustomValidity('Это не похоже на настоящий email.');\n            } else {\n                emailInput.setCustomValidity('');\n            }\n        });\n\n        const passwordInput = document.getElementById('Login__password');\n        passwordInput.addEventListener('input', () => {\n            if (passwordInput.validity.tooShort) {\n                passwordInput.setCustomValidity(`Слишком короткий пароль, минимум 8 символов (Сейчас ${passwordInput.value.length}).`);\n            } else {\n                passwordInput.setCustomValidity('');\n            }\n        });\n    };\n\n    useEffect(() => {\n        setInputListeners();\n    }, []);\n    useEffect(() => {\n        loggedIn && history.push('/movies');\n    }, [loggedIn]);\n    function submitLogin(event) {\n        event.preventDefault();\n        const userEmail = event.target.email.value;\n        const userPassword = event.target.password.value;\n        handleLogin(userEmail, userPassword)\n        setAllowSubmit(false);\n    }\n\n    return (\n        <section className=\"Login\">\n            <Header pageType={'login'}/>\n            <form\n                noValidate={true}\n                autoComplete=\"off\"\n                onSubmit={submitLogin}\n                className=\"Login__form\">\n                <label className=\"Login__label\">\n                    E-mail\n                    <input\n                        id=\"Login__email\"\n                        name=\"email\"\n                        type=\"text\"\n                        autoComplete=\"off\"\n                        placeholder=\"example@test.ru\"\n                        pattern=\"^\\S+@\\S+\\.\\S+$\"\n                        minLength=\"2\"\n                        className=\"Login__input\"\n                        onChange={(e) => {\n                            setEmail(e.target.value);\n                            validateInputOnChange(e);\n                        }}\n                        value={email}\n                        required\n                    />\n                    <span className=\"Login__errorText\" id=\"Login__emailError\"></span>\n                </label>\n                <label className=\"Login__label\">\n                    Пароль\n                    <input\n                    style={{background: 'none'}}\n                        id=\"Login__password\"\n                        name='password'\n                        type=\"password\"\n                        autoComplete='off'\n                        required\n                        onChange={(e) => {\n                            setPassword(e.target.value);\n                            validateInputOnChange(e);\n                        }}\n                        value={password}\n                        minLength=\"8\"\n                        className=\"Login__input\"/>\n                    <span className=\"Login__errorText\" id=\"Login__passwordError\"></span>\n                </label>\n                <button\n                    disabled={!allowSubmit}\n                    type=\"submit\"\n                    className=\"Login__button\">Войти</button>\n                <p className=\"Login__text\">Ещё не зарегистрированы? <Link to=\"/signup\"\n                                                                          className=\"Login__link\">Регистрация</Link></p>\n            </form>\n\n        </section>\n    );\n}\n\nexport default Login;\n","import {React, useContext, useState, useEffect} from \"react\";\nimport './Profile.css';\nimport Header from \"../Header/Header\";\nimport CurrentUserContext from \"../contexts/CurrentUserContext\";\n\nfunction Profile({handleUpdateUserData, logout}) {\n\n    const { currentUser } = useContext(CurrentUserContext);\n    const { email, name } = currentUser;\n    const [nameInput, setName] = useState('');\n    const [emailInput, setEmail] = useState('');\n\n    const [allowSubmit, setAllowSubmit] = useState(false);\n\n    useEffect(()=>{\n        console.log('PROFILE SHIIIIT',currentUser);\n            setName(name);\n            setEmail(email);\n\n    }, [currentUser]);\n\n\n    function handleInputError  (input, message, isError) {\n        console.log(input, message, isError)\n        const inputError = document.getElementById(`${input.id}Error`);\n        input.classList.toggle('profile__error', isError);\n        inputError.textContent = message;\n        inputError.classList.toggle('profile__error-message_shown', isError);\n        setAllowSubmit(false);\n    }\n\n    function checkFormValidity () {\n        const inputs = Array.from(document.getElementsByTagName('input'));\n        const areAllInputsValid = inputs.every((input) => input.validity.valid);\n        setAllowSubmit(areAllInputsValid);\n    }\n\n    function handleFormSubmit (event){\n        event.preventDefault();\n        console.log(nameInput, emailInput)\n        handleUpdateUserData( nameInput, emailInput);\n    }\n\n    function validateInputOnChange (event) {\n        const input = event.target;\n\n        if (input.validity.valid) {\n            handleInputError(input, input.validationMessage, false);\n        } else {\n            input.dataset.valid = false;\n            handleInputError(input, input.validationMessage, true);\n        }\n        checkFormValidity();\n    }\n\n\n    function setInputListeners () {\n        const nameInput = document.getElementById('Profile__name');\n        nameInput.addEventListener('input', () => {\n            if (nameInput.validity.patternMismatch) {\n                nameInput.setCustomValidity('Имя содержит недопустимые символы.');\n            } else if (nameInput.validity.tooShort) {\n                nameInput.setCustomValidity('Имя должно быть больше 2 символов.');\n            } else if (nameInput.validity.valueMissing) {\n                nameInput.setCustomValidity('Введите ваше имя на латинице или кириллице.');\n            } else {\n                nameInput.setCustomValidity('');\n            }\n        });\n\n        const emailInput = document.getElementById('Profile__email');\n        emailInput.addEventListener('input', () => {\n            if (emailInput.validity.typeMismatch || emailInput.validity.patternMismatch) {\n                emailInput.setCustomValidity('email указан с ошибкой, он должен быть вида example@test.ru');\n            } else {\n                emailInput.setCustomValidity('');\n            }\n        });\n    }\n\n    useEffect(() => {\n        setInputListeners();\n    }, []);\n\n\n    return (\n        <>\n            <Header pageType={'profile'}/>\n            <section className=\"Profile\">\n                <h1 className=\"Profile__title\">Привет, {name}!</h1>\n                <form noValidate={true} onSubmit={(e) => handleFormSubmit(e)} className=\"Profile__container\">\n                    <label className=\"Profile__textContainer\">\n                        <p className=\"Profile__text\">Имя</p>\n                        <input\n                            className=\"Profile__text\"\n                            minLength={2}\n                            id='Profile__name'\n                            value={nameInput}\n                            type='text'\n                            pattern=\"^[А-Яа-яa-zA-Z]+(([' -][А-Яа-яa-zA-Z ])?[А-Яа-яa-zA-Z]*)*$\"\n                            required\n                            onChange={(e) => {\n                                setName(e.target.value);\n                                validateInputOnChange(e);\n                            }}\n                            ></input>\n                        <span className=\"profile__error-message\" id=\"Profile__nameError\" />\n                    </label>\n                    <label className=\"Profile__textContainer\">\n                        <p className=\"Profile__text\">E-mail</p>\n                        <input\n                            id='Profile__email'\n                            className=\"Profile__text\"\n                            type='email'\n                            value={emailInput}\n                            pattern=\"^\\S+@\\S+\\.\\S+$\"\n                            minLength=\"2\"\n                            required\n                            onChange={(e) => {\n                                setEmail(e.target.value);\n                                validateInputOnChange(e);\n                            }}\n                        ></input>\n                        <span className=\"profile__error-message\" id=\"Profile__emailError\" />\n                    </label>\n                    <button disabled={!allowSubmit} type=\"submit\"\n                            className=\"Profile__button Profile__button_registration\">Редактировать\n                    </button>\n                    <button onClick={logout} className=\"Profile__button Profile__button_logout\">Выйти из аккаунта\n                    </button>\n                </form>\n\n            </section>\n        </>\n    );\n}\n\nexport default Profile;\n","import React from \"react\";\r\nimport \"./NotFound.css\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\nfunction NotFound() {\r\nreturn (\r\n    <section className=\"NotFound\">\r\n        <h1 className='NotFound__number'>404</h1>\r\n        <p className=\"NotFound__text\">Страница не найдена</p>\r\n        <Link className=\"NotFound__link\" to='/'>Назад</Link>\r\n    </section>\r\n);\r\n}\r\n\r\nexport default NotFound;","const baseUrl = 'https://api.sidwonder.diploma.nomoredomains.rocks';\r\n// const baseUrl = \"http://localhost:3000\";\r\n\r\nclass MainApi {\r\n    constructor({baseUrl}) {\r\n        this._baseUrl = baseUrl;\r\n        this._headers =   {\r\n            Accept: 'application/json',\r\n                'Content-Type': 'application/json',\r\n        };\r\n        this._headersAuth = {\r\n            Accept: 'application/json',\r\n            'Content-Type': 'application/json',\r\n            'Authorization': `Bearer ${this._token}`,\r\n        };\r\n    }\r\n\r\n    setToken(token) {\r\n        console.log(this._token)\r\n        \r\n        return this._token = token;\r\n    }\r\n\r\n    createUser(name, email, password) {\r\n        return fetch(`${this._baseUrl}/signup`, {\r\n            method: \"POST\",\r\n            headers:{\r\n                Accept: 'application/json',\r\n                'Content-Type': 'application/json',\r\n            },\r\n            credentials: 'include',\r\n            body: JSON.stringify({ name, password, email }),\r\n        })\r\n    }\r\n\r\n    login(email, password) {\r\n        return fetch(`${this._baseUrl}/signin`, {\r\n            method: \"POST\",\r\n            headers: {\r\n                Accept: 'application/json',\r\n                    'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({ email, password }),\r\n            credentials: \"include\",\r\n        })\r\n            .then((response) => response)\r\n            .then((data) => {\r\n                if (data.ok) {\r\n                    return data.json();\r\n                } else if (data.status === 400) {\r\n                    throw new Error('не передано одно из полей');\r\n                } else if (data.status === 401) {\r\n                    throw new Error('пользователь с email не найден');\r\n                } else {\r\n                    throw new Error('что-то пошло не так');\r\n                }\r\n            })\r\n            .catch((err) => {\r\n                console.log(err);\r\n            });\r\n    }\r\n\r\n    getUserData(token) {\r\n        return fetch(`${this._baseUrl}/users/me`, {\r\n            method: \"GET\",\r\n            headers:  {\r\n                Accept: 'application/json',\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${token}`,\r\n            },\r\n            credentials: \"include\",\r\n        })\r\n            .then((response) => response)\r\n            .then((res) => {\r\n                console.log( this._headersAuth)\r\n                if (res.status === 401) {\r\n                    throw new Error(\r\n                        \"Токен не передан или передан не в том формате\"\r\n                    );\r\n                } else if (res.status === 400) {\r\n                    throw new Error(\"Переданный токен некорректен\");\r\n                } else {\r\n                    return res.json();\r\n                }\r\n            })\r\n            .catch((err) => {\r\n                console.log(err);\r\n            });\r\n    }\r\n\r\n    editUserData({ name, email }, token) {\r\n        return fetch(`${this._baseUrl}/users/me`, {\r\n            method: \"PATCH\",\r\n            headers:  {\r\n                Accept: 'application/json',\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${token}`,\r\n            },\r\n            credentials: \"include\",\r\n            body: JSON.stringify({ name, email }),\r\n        })\r\n            .then((response) => response)\r\n            .catch((err) => console.log(err));\r\n    }\r\n\r\n    getFavMovies(token){\r\n        return fetch(`${this._baseUrl}/movies`, {\r\n            method: \"GET\",\r\n            headers:  {\r\n                Accept: 'application/json',\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${token}`,\r\n            },\r\n            credentials: \"include\",\r\n        })\r\n            .then((response) => response.json())\r\n            .catch((e) => console.log(e));\r\n    }\r\n    addToFav(movie, token) {\r\n        return fetch(`${this._baseUrl}/movies`, {\r\n            method: \"POST\",\r\n            headers:  {\r\n                Accept: 'application/json',\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${token}`,\r\n            },\r\n            credentials: \"include\",\r\n            body: JSON.stringify({\r\n                movieId: movie.id,\r\n                country: movie.country || 'unknown',\r\n                director: movie.director,\r\n                duration: movie.duration,\r\n                year: movie.year,\r\n                description: movie.description,\r\n                image: `https://api.nomoreparties.co${movie.image.url}`,\r\n                thumbnail: `https://api.nomoreparties.co${movie.image.formats.thumbnail.url}`,\r\n                trailer: movie.trailerLink,\r\n                nameRU: movie.nameRU,\r\n                nameEN: movie.nameEN || 'unknown',\r\n            }),\r\n        })\r\n            .then((response) => {\r\n                if (response.ok) {\r\n                    return response.json();\r\n                }\r\n                return Promise.reject(new Error(`${response.status}`));\r\n            })\r\n            .catch((err) => {\r\n                console.log(err);\r\n            });\r\n    }\r\n\r\n    removeFromFav(id, token) {\r\n        return fetch(`${this._baseUrl}/movies/${id}`, {\r\n            method: \"DELETE\",\r\n            headers:  {\r\n                Accept: 'application/json',\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${token}`,\r\n            },\r\n            credentials: \"include\",\r\n        });\r\n    }\r\n}\r\n\r\nconst mainApi = new MainApi({baseUrl});\r\nexport default mainApi;","import './App.css';\nimport {React, useState, useEffect, useRef} from 'react';\nimport {\n    Route,\n    useHistory,\n    Switch,\n    useLocation\n} from \"react-router-dom\";\n\nimport CurrentUserContext from \"../contexts/CurrentUserContext\";\n\nimport Main from \"../Main/Main\";\nimport Movies from \"../Movies/Movies\";\nimport SavedMovies from \"../SavedMovies/SavedMovies\";\n\nimport ProtectedRoute from \"../ProtectedRoute/ProtectedRoute\";\nimport Footer from \"../Footer/Footer\";\nimport Register from \"../Register/Register\";\nimport Login from \"../Login/Login\";\nimport Profile from \"../Profile/Profile\";\nimport NotFound from \"../NotFound/NotFound\";\n\nimport mainApi from \"../../utils/MainApi\";\nimport MainApi from \"../../utils/MainApi\";\n\nimport {PAGE_TYPES} from \"../../utils/Constants\";\n\nfunction App() {\n\n    const [isLoggedIn, setIsLoggedIn] = useState(false);\n    const [currentUser, setCurrentUser] = useState({});\n    const [favMoviesCards, setFavMoviesCards] = useState([]);\n\n\n    const history = useHistory();\n    let token = localStorage.getItem('token');\n    const currentLocation = useLocation();\n    const path = currentLocation.pathname;\n\n\n    const {SAVED_MOVIES} = PAGE_TYPES;\n\n    const firstRender = useRef(true);\n    useEffect(() => {\n        if (firstRender.current) {\n            tokenChecker();\n            firstRender.current = false;\n        }\n    });\n\n    useEffect(() => {\n        token = localStorage.getItem('token');\n    },[currentUser]);\n\n    function addMovieToFavorite(movie) {\n        MainApi.addToFav(movie, token)\n            .then(() => getFavMovies())\n    }\n\n    function removeMovieFromFavorite(movieID) {\n\n        MainApi.removeFromFav(movieID, token)\n            .then(()=> getFavMovies())\n    }\n\n    function tokenChecker() {\n        const token = localStorage.getItem('token');\n        if(token) {\n            setIsLoggedIn(true);\n            history.push(path);\n            mainApi.setToken(token);\n            mainApi.getUserData(token)\n                .then((res) => {\n                    const data = res.user ? res.user : {};\n                    setCurrentUser(data);\n                    getFavMovies();\n                })\n                .catch((e) => console.log(e));\n        } else {\n            return;\n        }\n    }\n\n    function getFavMovies () {\n        const token = localStorage.getItem('token');\n        mainApi.getFavMovies(token)\n            .then(res => {\n                setFavMoviesCards(res);\n            })\n            .catch((e) => {\n                console.log(e);\n            });\n    }\n\n    function handleRegister(name, email, password) {\n        return mainApi.createUser(name, email, password)\n    }\n\n    function handleLogin(email, password) {\n        mainApi.login(email, password)\n            .then((data) => {\n                if (data.token) {\n                    setIsLoggedIn(true);\n                    localStorage.setItem('token', data.token);\n                    mainApi.setToken(data.token);\n                    history.push(\"/movies\");\n                }\n            })\n            .then(()=> tokenChecker())\n            .catch((err) => console.log(err));\n    }\n\n    function handleUpdateUserData(name, email) {\n        mainApi\n            .editUserData({ name, email }, token)\n            .then(() => {\n                tokenChecker();\n            })\n            .catch((e) => console.log(e));\n    }\n\n    function handleLogout () {\n        localStorage.clear();\n        setIsLoggedIn(false);\n        history.push(\"/\");\n        setCurrentUser({});\n    }\n\n    return (\n        <CurrentUserContext.Provider value={{ currentUser, setCurrentUser }}>\n            <div className=\"App\">\n                <Switch>\n                    <Route exact path=\"/\">\n                        <Main  loggedIn={isLoggedIn}/>\n                    </Route>\n\n                    <Route path=\"/signin\">\n                        <Login handleLogin={handleLogin}\n                               loggedIn={isLoggedIn}/>\n                    </Route>\n                    <Route\n                        path=\"/signup\">\n                        <Register handleRegister={handleRegister}\n                                    handleLogin={handleLogin}\n                                  loggedIn={isLoggedIn}/>\n                    </Route>\n                    <ProtectedRoute\n                        path='/movies'\n                        redirectTo='/signin'\n                        hasPermission={isLoggedIn}>\n                        <Movies\n                            logout = {handleLogout}\n                            loggedIn={isLoggedIn}\n                            favMovies={favMoviesCards}\n                            addMovieToFav={addMovieToFavorite}\n                            removeMovieFromFav={removeMovieFromFavorite}\n                            getFavMovies={getFavMovies}\n                        />\n                        <Footer />\n                    </ProtectedRoute>\n\n                    <ProtectedRoute\n                        path=\"/saved-movies\"\n                        redirectTo='/signin'\n                        hasPermission={isLoggedIn}>\n                        <SavedMovies\n                            logout = {handleLogout}\n                            setFavMoviesCards={setFavMoviesCards}\n                            loggedIn={isLoggedIn}\n                            movies={favMoviesCards}\n                            removeMovieFromFav={removeMovieFromFavorite}\n                            getFavMovies={getFavMovies}\n                            pageType = {SAVED_MOVIES}\n                        />\n                        <Footer />\n                    </ProtectedRoute>\n                    <ProtectedRoute\n                        path=\"/profile\"\n                        redirectTo='/signin'\n                        hasPermission={isLoggedIn}>\n                        <Profile\n                            logout = {handleLogout}\n                            handleUpdateUserData={handleUpdateUserData}\n                            loggedIn={isLoggedIn}\n                        />\n                    </ProtectedRoute>\n                    <Route path=\"/*\">\n                        <NotFound/>\n                    </Route>\n                </Switch>\n\n            </div>\n        </CurrentUserContext.Provider>\n    );\n}\n\nexport default App;\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport './index.css';\r\nimport 'normalize.css';\r\nimport App from './components/App/App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n      <BrowserRouter>\r\n          <App />\r\n      </BrowserRouter>\r\n\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}